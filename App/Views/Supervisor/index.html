{% extends "supervisor_base.html" %}

{% block link %}
{% endblock %}

{% block title %}דף ראשי אחראי הזמנות{% endblock %}

{% block body %}  
<!--order table-->
<div class="container table-responsive mt-4">
  <table class="table table-hover">
      <thead>
          <tr class="bg-dark text-white">
              <th scope="col">מס הזמנה</th>
              <th scope="col">מזהה משתמש</th>
              <th scope="col">תאריך קבלה</th>
              <th scope="col">תאריך יעד</th>
              <th scope="col">מחיר סופי</th>
              <th scope="col">סטאטוס</th>
              <th scope="col" class="text-center">פעולות</th>
          </tr>
      </thead>
      <tbody>

        {% for o in orders %}
        <!--order-->
        <tr>
            <th scope="row">{{o.order_id}}</th>
            <td>{{o.user_id}}</td>
            <td>{{o.start_date}}</td>
            <td>{{o.exp_date}}</td>
            <td>{{o.price}}</td>
            {% if o.status==0 %}
              <td>מחכה לאישור</td>
            {% else %}
              <td>אושרה</td>
            {% endif %}
            <!--Orders row buttons-->
            <td>
              <div class="d-flex justify-content-end">
                {% if o.status==0 %}
                    <form action="/supervisor/approve/{{o.order_id}}" method="POST">
                        <button href="#" class="btn btn-dark mr-2" name="approve_order">אישור הזמנה</button>
                    </form>
                {% else %}
                    <form action="/supervisor/approve/{{o.order_id}}" method="POST">
                        <button href="#" class="btn btn-dark mr-2" name="approve_order" disabled>אישור הזמנה</button>
                    </form>
                {% endif %}
                    <a href="#order_info{{o.order_id}}" class="btn btn-default" data-toggle="collapse">
                        <svg class="bi bi-chevron-compact-down" width="1em" height="1em" viewBox="0 0 16 16"
                            fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd"
                                d="M1.553 6.776a.5.5 0 01.67-.223L8 9.44l5.776-2.888a.5.5 0 11.448.894l-6 3a.5.5 0 01-.448 0l-6-3a.5.5 0 01-.223-.67z"
                                clip-rule="evenodd" />
                        </svg>
                    </a>
                </div>
            </td>
        </tr>
        <tr id="order_info{{o.order_id}}" class="main-container collapse">
            <td colspan="7">
                <table class="w-100">
                    <thead>
                        <tr>
                            <th class="h6">
                                מספר מוצר
                            </th>
                            <th class="h6">
                                  מספר צבע 
                            </th>
                            <th class="h6">
                                מספר מידה
                            </th>
                            <th class="h6">
                                מחיר מוצר
                            </th>
                            <th class="h6">
                                כמות מוצר
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for op in orders_products %}
                          {% if op.order_id is same as(o.order_id) %}
                        <tr>
                            <td>{{op.product_id}}</td>
                            <td>{{op.color_id}}</td>
                            <td>{{op.size_id}}</td>
                            <td>{{op.price}}</td>
                            <td>{{op.quantity}}</td>
                        </tr>
                        {% endif %}
                        {% endfor %}
                    </tbody>
                </table>
            </td>
        </tr>
        {% endfor %}


      </tbody>
  </table>
</div>
{% endblock %}


